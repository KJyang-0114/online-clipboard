# 🔧 GitHub Pages 部署故障排除指南

## ❌ 常見錯誤：git exit code 128

這是最常見的部署錯誤，通常是權限問題。

### 🔍 錯誤訊息
```
The process '/usr/bin/git' failed with exit code 128
```

### ✅ 解決方法

#### 方法一：更新 GitHub Actions 配置 (已修正)
我已經更新了 `.github/workflows/deploy.yml` 文件，使用了最新的 GitHub Pages 部署方法。

#### 方法二：檢查 GitHub Pages 設定
1. 前往您的 GitHub 存儲庫
2. **Settings** → **Pages**
3. 確認 **Source** 設定為 **GitHub Actions**
4. 如果設定為 "Deploy from a branch"，請改為 "GitHub Actions"

#### 方法三：檢查存儲庫權限
1. 前往 **Settings** → **Actions** → **General**
2. 確認 "Workflow permissions" 設定為：
   - ☑️ **Read and write permissions**
   - ☑️ **Allow GitHub Actions to create and approve pull requests**

---

## 🚀 重新部署步驟

### 1. 推送更新的配置
```bash
# 添加修正的 GitHub Actions 文件
git add .github/workflows/deploy.yml

# 提交變更
git commit -m "修正 GitHub Actions 部署配置"

# 推送到 GitHub
git push
```

### 2. 檢查 Actions 狀態
1. 前往 GitHub 存儲庫
2. 點擊 **Actions** 標籤
3. 查看最新的工作流程執行狀態

### 3. 等待部署完成
- 通常需要 2-5 分鐘
- 成功時會顯示綠色勾勾 ✅

---

## 🔍 其他常見問題

### 問題：404 頁面未找到

#### 可能原因：
1. GitHub Pages 還在處理中
2. 基礎路徑配置問題

#### 解決方法：
1. 等待 5-10 分鐘
2. 清除瀏覽器快取
3. 檢查 `vite.config.ts` 中的 `base` 設定：
   ```typescript
   base: '/online-clipboard/',
   ```

### 問題：網站載入但樣式錯亂

#### 解決方法：
1. 檢查瀏覽器開發者工具 (F12)
2. 查看 Console 是否有錯誤
3. 確認所有資源都正確載入

### 問題：功能不工作

#### 解決方法：
1. 檢查瀏覽器 Console 錯誤
2. 確認 localStorage 功能可用
3. 嘗試無痕模式測試

---

## 🛠️ 手動部署方法 (備用)

如果 GitHub Actions 持續失敗，可以使用手動部署：

### 方法：使用 gh-pages 套件

```bash
# 1. 確保已安裝 gh-pages
npm install --save-dev gh-pages

# 2. 建構應用程式
npm run build

# 3. 手動部署
npm run deploy
```

---

## 📋 部署檢查清單

在部署前確認：

- [ ] GitHub 存儲庫已建立
- [ ] 代碼已推送到 main 分支
- [ ] GitHub Pages 設定為 "GitHub Actions"
- [ ] Actions 權限設定正確
- [ ] `.github/workflows/deploy.yml` 文件存在且正確

---

## 🔄 完整重新開始流程

如果完全搞混了，可以重新開始：

### 1. 刪除本地 Git 歷史
```bash
rm -rf .git
git init
```

### 2. 重新設定
```bash
git add .
git commit -m "Initial commit"
git branch -M main
git remote add origin https://github.com/kjyang-0114/online-clipboard.git
git push -u origin main
```

### 3. 重新設定 GitHub Pages
1. Settings → Pages → Source → GitHub Actions

---

## 📞 仍然有問題？

### 查看詳細錯誤
1. GitHub → Actions → 點擊失敗的工作流程
2. 展開錯誤步驟查看詳細日誌
3. 複製錯誤訊息

### 常用調試指令
```bash
# 檢查 Git 狀態
git status

# 檢查遠端連接
git remote -v

# 檢查分支
git branch -a

# 重新同步
git pull origin main
```

### 替代方案
如果 GitHub Pages 持續有問題，可以考慮：
- Netlify (拖拽 dist 資料夾即可部署)
- Vercel (連接 GitHub 自動部署)
- Firebase Hosting

---

## ✅ 成功指標

部署成功後您應該看到：
- ✅ Actions 標籤顯示綠色勾勾
- ✅ Settings → Pages 顯示網站 URL
- ✅ 網站可以正常訪問
- ✅ 所有功能都能正常工作

**記住**：GitHub Pages 有時需要等待幾分鐘才能看到更新！耐心等待 😊